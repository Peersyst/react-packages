import { Canvas, Meta } from "@storybook/addon-docs";
import { FormControl, FormControlLabel, Row } from "@peersyst/react-components";
import themedContainer from "../styles/themedContainer";

<Meta
    title="Components/Inputs/FormControl"
    component={FormControl}
    parameters={{
        docs: {
            container: themedContainer,
        },
    }}
/>

# FormControl

This component is the core of all input components. It is in charge of making things like validation and form notifications happen.

Because of that, this component should never be used at a high level, it is only used as the core of an input component, so its implementation is much easier and a common behaviour is achieved.

Basically this component grants de developer the following:


* Implicit controlled and uncontrolled behaviour
* Implicit and explicit validation
  * Checks that the required prop is set and the value is not falsy.
  * Accepts a validation prop to validate its value and provide a custom error message.
* Form notifications
  * Notifies the [name, value] pair
  * Notifies the validity of the input
* Implicit label: A modular label can be placed everywhere around the input. The developer can even pass a custom Label component
* Implicit errors: If the input is invalid an error message is displayed bellow the input
* Implicit hint: A hint can be displayed.

## Usage

The render props pattern is used in order to pass the value, setValue and FormControlContext to its child.

````jsx
<FormControl<number>
    Label={[FormControlLabel, { alignment: "center" }]}
    defaultValue={0}
    label="Counter"
    validation={v => [v > 4, "Value must be greater than 4"]}
    showValid
    >
    {(value, setValue, context) => (
        <div
            onClick={() => setValue(value + 1)}
            style={{cursor: "pointer", userSelect: "none", margin: "0 auto"}}
        >
            {value}
        </div>
    )}
</FormControl>
````

<Canvas>
    <Row justifyContent="center">
        <FormControl
            Label={[FormControlLabel, { alignment: "center" }]}
            defaultValue={0}
            label="Counter"
            validation={v => [v > 4, "Value must be greater than 4"]}
            showValid
            >
            {(value, setValue) => (
                <div
                    onClick={() => setValue(value + 1)}
                    style={{cursor: "pointer", userSelect: "none", margin: "0 auto"}}
                >
                    {value}
                </div>
            )}
        </FormControl>
    </Row>
</Canvas>
